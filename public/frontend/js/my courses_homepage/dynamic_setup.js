define(function(require,exports,module){var a=$("#js-setup-popl"),c=$(".setup-coverLayer"),h=user.uid,g=function(){a.hide(),c.hide()},v=function(c){!c||c.length<1?(a.find(".switch").addClass("on"),w()):(a.find(".switch").addClass("on").each(function(){for(var a=this,i=0;i<c.length;i++)$(a).attr("data-setting")==c[i].item&&$(a).removeClass("on")}),w())},w=function(){a.show(),c.show()};a.on("click",".pinkround",function(){var a=$(this).parents(".switch");a.hasClass("on")?a.removeClass("on"):a.addClass("on")}).on("click",".close",function(){g()}).on("click",".save",function(){var c=[];a.find(".switch").each(function(){$(this).hasClass("on")||c.push($(this).attr("data-setting"))}),c.length<1&&(c=""),$.ajax({type:"post",url:"/u/"+h+"/dynamicsetting",data:{settings:c},dataType:"json",success:function(a){0==a.result&&v(a.data),g(),window.location.reload()}})});var y=!1,C=function(){y||(y=!0,$.ajax({type:"get",url:"/u/"+h+"/dynamicsetting",dataType:"json",success:function(a){0==a.result&&(v(a.data),y=!1)}}))};module.exports={init:C}});